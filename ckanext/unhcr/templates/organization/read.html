{% ckan_extends %}

{% set deposit = h.get_data_deposit() %}

{% block page_primary_action %}
  {% if c.group_dict.state == 'approval_needed' %}
    <div class="alert alert-warning" role="alert">
        <p>{% trans %}This data container is waiting for an administrator approval{% endtrans %}</p>
    </div>
    {% if h.check_access('sysadmin') %}
      <a href="/data-container/{{ c.group_dict.id }}/approve" class="btn btn-primary">
        {% trans %}Approve Data Container{% endtrans %}
      </a>
      <a href="/data-container/{{ c.group_dict.id }}/reject" class="btn btn-danger">
        {% trans %}Reject Data Container{% endtrans %}
      </a>
     {% endif %}
  {% else %}
    {% if c.group_dict.id != deposit.id %}
      {% if h.check_access('package_create', {'owner_org': c.group_dict.id}) %}
        {% snippet 'snippets/add_dataset_buttons.html', group=c.group_dict.id%}
      {% endif %}
    {% endif %}
  {% endif %}
{% endblock %}

{% block primary_content_inner %}
  {% if c.group_dict.state == 'active' %}
    {{ super() }}
  {% endif %}
{% endblock %}

{% block packages_list %}
  {% if c.page.items %}
    {% if c.group_dict.id == deposit.id %}
      {{ h.snippet('snippets/deposit_package_list.html', packages=c.page.items) }}
    {% else %}
      {{ h.snippet('snippets/package_list.html', packages=c.page.items) }}
    {% endif %}
  {% endif %}
{% endblock %}
